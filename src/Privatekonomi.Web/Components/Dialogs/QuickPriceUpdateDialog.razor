@inject IDialogService DialogService

<MudDialog>
    <DialogContent>
        <MudText Class="mb-4" Typo="Typo.body1">@ContentText</MudText>
        <MudNumericField @bind-Value="_newPrice" 
                         Label="Ny kurs (kr)" 
                         Required="true" 
                         Variant="Variant.Outlined"
                         Min="0.01m" 
                         Step="0.01m" 
                         Immediate="true"
                         Format="N2"
                         Adornment="Adornment.Start" 
                         AdornmentIcon="@Icons.Material.Filled.AttachMoney"
                         HelperText="Ange det nya priset per aktie/fondandel" />
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Cancel">Avbryt</MudButton>
        <MudButton Color="@Color" OnClick="Submit" Disabled="@(_newPrice <= 0)">
            @ButtonText
        </MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter]
    public required IMudDialogInstance MudDialog { get; set; }

    [Parameter]
    public string ContentText { get; set; } = "";

    [Parameter]
    public string ButtonText { get; set; } = "OK";

    [Parameter]
    public Color Color { get; set; } = Color.Primary;

    private decimal _newPrice = 0;

    private void Submit()
    {
        MudDialog.Close(DialogResult.Ok(_newPrice));
    }

    private void Cancel() => MudDialog.Cancel();
}
