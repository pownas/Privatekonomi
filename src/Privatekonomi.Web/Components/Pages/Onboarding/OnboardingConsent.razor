@using MudBlazor

<MudContainer MaxWidth="MaxWidth.Medium" Class="onboarding-step">
    <MudPaper Elevation="3" Class="pa-8">
        <MudText Typo="Typo.h4" GutterBottom="true" Class="mb-2">
            <MudIcon Icon="@Icons.Material.Filled.Security" Color="Color.Primary" Class="mr-2" />
            Samtycke och dataskydd
        </MudText>
        
        <MudText Typo="Typo.body1" Color="Color.Secondary" Class="mb-6">
            Innan vi fortsätter vill vi informera dig om hur vi hanterar din data
        </MudText>
        
        <MudDivider Class="mb-6" />
        
        <MudPaper Elevation="0" Class="pa-4 mb-4" Style="background-color: var(--mud-palette-background-grey);">
            <MudText Typo="Typo.h6" GutterBottom="true" Class="mb-3">
                <MudIcon Icon="@Icons.Material.Filled.Lock" Size="Size.Small" Class="mr-1" />
                Så skyddar vi din data
            </MudText>
            
            <MudList T="string" Dense="true">
                <MudListItem Icon="@Icons.Material.Filled.Check" IconColor="Color.Success">
                    <MudText><strong>Kryptering:</strong> All data krypteras både i transit och i vila</MudText>
                </MudListItem>
                <MudListItem Icon="@Icons.Material.Filled.Check" IconColor="Color.Success">
                    <MudText><strong>Isolering:</strong> Din data är helt isolerad från andra användare</MudText>
                </MudListItem>
                <MudListItem Icon="@Icons.Material.Filled.Check" IconColor="Color.Success">
                    <MudText><strong>Lokalt:</strong> Du kan välja att köra appen lokalt på din egen server</MudText>
                </MudListItem>
                <MudListItem Icon="@Icons.Material.Filled.Check" IconColor="Color.Success">
                    <MudText><strong>GDPR:</strong> Vi följer EU:s dataskyddsförordning</MudText>
                </MudListItem>
                <MudListItem Icon="@Icons.Material.Filled.Check" IconColor="Color.Success">
                    <MudText><strong>Kontroll:</strong> Du äger din data och kan exportera eller radera den när som helst</MudText>
                </MudListItem>
            </MudList>
        </MudPaper>
        
        <MudAlert Severity="Severity.Info" Class="mb-4">
            <MudText Typo="Typo.body2">
                <strong>PSD2 och bankkoppling:</strong> När du kopplar din bank använder vi PSD2-standarden 
                som är reglerad av EU. Vi lagrar aldrig dina inloggningsuppgifter till banken.
            </MudText>
        </MudAlert>
        
        <MudExpansionPanels Class="mb-6">
            <MudExpansionPanel Text="Läs mer om vår integritetspolicy">
                <MudText Typo="Typo.body2" Class="mb-2">
                    <strong>Vilken data samlar vi in?</strong>
                </MudText>
                <MudText Typo="Typo.body2" Class="mb-3">
                    Vi samlar in den information du väljer att dela med oss: transaktioner, budgetar, 
                    sparmål och andra ekonomiska uppgifter som du registrerar i appen.
                </MudText>
                
                <MudText Typo="Typo.body2" Class="mb-2">
                    <strong>Hur använder vi din data?</strong>
                </MudText>
                <MudText Typo="Typo.body2" Class="mb-3">
                    Din data används endast för att tillhandahålla tjänsten till dig. Vi säljer aldrig 
                    din data till tredje part och använder den inte för reklam.
                </MudText>
                
                <MudText Typo="Typo.body2" Class="mb-2">
                    <strong>Kan jag ta bort min data?</strong>
                </MudText>
                <MudText Typo="Typo.body2">
                    Ja, du kan när som helst exportera din data och radera ditt konto med all tillhörande information.
                </MudText>
            </MudExpansionPanel>
        </MudExpansionPanels>
        
        <MudCheckBox @bind-Value="_acceptedTerms" Color="Color.Primary" Class="mb-4">
            <MudText Typo="Typo.body2">
                Jag har läst och godkänner <MudLink Href="/privacy" Target="_blank">integritetspolicyn</MudLink> 
                och samtycker till att mina transaktioner behandlas enligt beskrivningen ovan.
            </MudText>
        </MudCheckBox>
        
        <div class="d-flex justify-end">
            <MudButton Variant="Variant.Filled" 
                       Color="Color.Primary"
                       OnClick="@(() => OnNext.InvokeAsync())"
                       Disabled="@(!_acceptedTerms)">
                Jag samtycker, fortsätt
            </MudButton>
        </div>
    </MudPaper>
</MudContainer>

@code {
    [Parameter]
    public EventCallback OnNext { get; set; }

    private bool _acceptedTerms = false;
}
