# UtgiftsmÃ¶nster-analys

## Ã–versikt

UtgiftsmÃ¶nster-analysen Ã¤r en omfattande rapport som hjÃ¤lper anvÃ¤ndare att fÃ¶rstÃ¥ sina utgiftsvanor, identifiera trender och upptÃ¤cka mÃ¶jligheter till besparingar. Rapporten kombinerar flera analystekniker fÃ¶r att ge djupgÃ¥ende insikter om din ekonomi.

## TillgÃ¥ng till rapporten

Rapporten finns tillgÃ¤nglig via:
- **Navigeringsmeny**: Ekonomi â†’ UtgiftsmÃ¶nster-analys
- **Direkt URL**: `/economy/reports/spending-pattern`

## Funktioner

### 1. Periodval

VÃ¤lj vilken tidsperiod du vill analysera:

- **Senaste mÃ¥naden**: Analyserar dina utgifter frÃ¥n de senaste 30 dagarna
- **Senaste kvartalet**: Analyserar 3 mÃ¥nader av utgiftsdata
- **Senaste Ã¥ret**: Analyserar 12 mÃ¥naders utgiftsmÃ¶nster
- **Anpassad period**: VÃ¤lj dina egna start- och slutdatum fÃ¶r flexibel analys

### 2. Sammanfattningskort

HÃ¶gst upp i rapporten visas fyra sammanfattningskort:

- **Total utgifter**: Det totala beloppet du har spenderat under perioden
- **Genomsnitt/mÃ¥nad**: Genomsnittlig utgift per mÃ¥nad (anvÃ¤ndbart fÃ¶r budgetplanering)
- **Kategorier**: Antal kategorier dÃ¤r du har utgifter
- **Avvikelser**: Antal upptÃ¤ckta ovanliga utgiftsmÃ¶nster

### 3. Rekommendationer

Systemet genererar automatiskt rekommendationer baserat pÃ¥ din utgiftsdata:

#### Typer av rekommendationer:

**Budgetlarm (BudgetAlert)**
- Identifierar kategorier som utgÃ¶r en stor del av dina totala utgifter (>20%)
- FÃ¶reslÃ¥r att du ser Ã¶ver mÃ¶jligheter att minska kostnader i dessa omrÃ¥den

**Trendvarningar (TrendWarning)**
- UpptÃ¤cker kategorier dÃ¤r utgifterna Ã¶kar kraftigt (>15%)
- Visar potentiell besparing om trenden bryts
- Flaggar ovanligt hÃ¶ga utgifter jÃ¤mfÃ¶rt med historiken

**BesparingsmÃ¶jligheter (SavingsOpportunity)**
- UppmÃ¤rksammar mÃ¥nga okategoriserade transaktioner
- Ger positiv Ã¥terkoppling nÃ¤r utgifter minskar
- Visar faktiska besparingar vid minskande trender

#### PrioritetsnivÃ¥er:

- ğŸ”´ **HÃ¶g (High)**: KrÃ¤ver omedelbar uppmÃ¤rksamhet
- ğŸŸ¡ **Medium**: BÃ¶r ses Ã¶ver inom kort
- ğŸ”µ **LÃ¥g (Low)**: Informativ, ingen akut Ã¥tgÃ¤rd krÃ¤vs

### 4. UtgiftsfÃ¶rdelning per kategori

En detaljerad tabell som visar:

- **Kategori**: Kategorins namn med tillhÃ¶rande fÃ¤rg
- **Belopp**: Total summa spenderad i kategorin
- **Andel**: Procentuell andel av totala utgifter
- **Antal**: Antal transaktioner i kategorin
- **Snitt/trans**: Genomsnittligt belopp per transaktion
- **FÃ¶rÃ¤ndring**: Procentuell fÃ¶rÃ¤ndring jÃ¤mfÃ¶rt med fÃ¶regÃ¥ende period
  - â†—ï¸ RÃ¶d pil upp = Ã¶kande utgifter
  - â†˜ï¸ GrÃ¶n pil ner = minskande utgifter

### 5. Topp 5 utgiftskategorier

En visuell framstÃ¤llning av dina fem stÃ¶rsta utgiftskategorier:

- Rankade i ordning (#1-#5)
- Stapeldiagram som visar relativ storlek
- Exakt belopp fÃ¶r varje kategori
- Snabb Ã¶verblick Ã¶ver var pengarna gÃ¥r

### 6. MÃ¥natlig trend

En tabell som visar utgiftsutveckling mÃ¥nad fÃ¶r mÃ¥nad:

- **MÃ¥nad**: MÃ¥nad och Ã¥r (t.ex. "november 2024")
- **Belopp**: Total utgift fÃ¶r mÃ¥naden
- **Transaktioner**: Antal genomfÃ¶rda transaktioner
- **Snitt/dag**: Genomsnittlig utgift per dag i mÃ¥naden

Denna data hjÃ¤lper dig att:
- Identifiera sÃ¤songsmÃ¶nster i dina utgifter
- JÃ¤mfÃ¶ra olika mÃ¥nader
- Planera fÃ¶r framtida utgifter

### 7. Trendanalys

Detaljerad analys av utgiftstrender bÃ¥de totalt och per kategori:

#### Trendtyper:

- **Ã–kande (Increasing)**: ğŸ”´ Utgifterna Ã¶kar Ã¶ver tid
- **Minskande (Decreasing)**: ğŸŸ¢ Utgifterna minskar Ã¶ver tid
- **Stabil (Stable)**: âšª Ingen signifikant fÃ¶rÃ¤ndring (<5%)

#### Vad visas:

- Trendprocent (hur mycket Ã¶kning/minskning)
- Beskrivning av trenden pÃ¥ svenska
- Endast signifikanta trender (>10% fÃ¶rÃ¤ndring) visas fÃ¶r kategorier

### 8. UpptÃ¤ckta avvikelser

Systemet anvÃ¤nder statistisk analys fÃ¶r att upptÃ¤cka ovanliga utgiftsmÃ¶nster:

#### Avvikelsetyper:

**Ovanligt hÃ¶g utgift (UnusuallyHigh)**
- MÃ¥nad dÃ¤r utgifterna Ã¤r betydligt hÃ¶gre Ã¤n normalt
- Kan indikera extraordinÃ¤ra utgifter eller budgetproblem
- Visas i rÃ¶tt

**Ovanligt lÃ¥g utgift (UnusuallyLow)**
- MÃ¥nad dÃ¤r utgifterna Ã¤r betydligt lÃ¤gre Ã¤n normalt
- Kan indikera sparsamhet eller ofullstÃ¤ndig data
- Visas i blÃ¥tt

#### Vad visas:

- Datum fÃ¶r avvikelsen
- Faktiskt belopp
- FÃ¶rvÃ¤ntat belopp (baserat pÃ¥ historisk data)
- Beskrivning av avvikelsen

## Analysmetoder

### KategorifÃ¶rdelning

BerÃ¤knar hur dina utgifter fÃ¶rdelas mellan olika kategorier och jÃ¤mfÃ¶r med fÃ¶regÃ¥ende period (samma lÃ¤ngd bakÃ¥t i tiden).

### Trenddetektering

Delar upp perioden i tvÃ¥ halvor och jÃ¤mfÃ¶r genomsnitten fÃ¶r att upptÃ¤cka trender. En fÃ¶rÃ¤ndring pÃ¥ >10% flaggas som signifikant trend.

### Anomalidetektering

AnvÃ¤nder standardavvikelse fÃ¶r att identifiera mÃ¥nader som avviker mer Ã¤n 2 standardavvikelser frÃ¥n genomsnittet. Detta hjÃ¤lper till att upptÃ¤cka ovanliga mÃ¶nster.

### Rekommendationsgenerering

Regelbaserad motor som:
1. Identifierar kategorier med hÃ¶g andel (>20%)
2. UpptÃ¤cker kraftigt Ã¶kande trender (>15%)
3. Flaggar mÃ¥nga okategoriserade transaktioner (>10%)
4. Ger positiv Ã¥terkoppling fÃ¶r minskande utgifter

## AnvÃ¤ndningsomrÃ¥den

### Budgetplanering

AnvÃ¤nd mÃ¥nadsgenomsnittet och kategorifÃ¶rdelningen fÃ¶r att sÃ¤tta realistiska budgetar.

### Kostnadskontroll

Identifiera kategorier dÃ¤r du spenderar mest och utvÃ¤rdera om det finns mÃ¶jlighet till besparing.

### TrendÃ¶vervakning

HÃ¥ll koll pÃ¥ om dina utgifter Ã¶kar eller minskar Ã¶ver tid i olika kategorier.

### Avvikelsehantering

UndersÃ¶k ovanliga utgiftsmÃ¶nster och fÃ¶rstÃ¥ vad som orsakade dem.

### Sparplanering

AnvÃ¤nd rekommendationerna fÃ¶r att identifiera konkreta besparingsmÃ¶jligheter.

## Tips fÃ¶r bÃ¤sta resultat

1. **Kategorisera dina transaktioner**: Ju fler transaktioner som Ã¤r kategoriserade, desto mer exakta blir analyserna.

2. **AnvÃ¤nd lÃ¤ngre perioder fÃ¶r trender**: Trendanalys fungerar bÃ¤st med minst 3-6 mÃ¥naders data.

3. **JÃ¤mfÃ¶r olika perioder**: Byt mellan mÃ¥nad, kvartal och Ã¥r fÃ¶r att se olika perspektiv.

4. **FÃ¶lj upp rekommendationer**: Ta rekommendationerna pÃ¥ allvar och implementera fÃ¶rÃ¤ndringar.

5. **Regelbunden granskning**: KÃ¶r rapporten mÃ¥nadsvis fÃ¶r att fÃ¶lja upp utvecklingen.

6. **Kombinera med andra rapporter**: AnvÃ¤nd tillsammans med BudgetÃ¶versikt och Ekonomisk HÃ¤lsa fÃ¶r en helhetsbild.

## BegrÃ¤nsningar

- KrÃ¤ver historisk data fÃ¶r trend- och avvikelseanalys (minst 2-3 mÃ¥nader)
- Endast utgiftstransaktioner inkluderas (inte inkomster)
- Anomalidetektering krÃ¤ver minst 3 mÃ¥naders data
- Okategoriserade transaktioner grupperas separat
- HushÃ¥llsfiltrering stÃ¶ds men Ã¤r valfri

## Framtida utveckling

Planerade fÃ¶rbÃ¤ttringar inkluderar:

- ğŸ“Š Grafisk visualisering med diagram (tÃ¥rtdiagram, stapeldiagram, tidsserier)
- ğŸ’¾ Export till PDF och Excel
- ğŸ” Drill-down till transaktionsnivÃ¥ direkt frÃ¥n rapporten
- ğŸ“ˆ Prognoser baserade pÃ¥ historiska mÃ¶nster
- ğŸ¯ Anpassningsbara trÃ¶skelvÃ¤rden fÃ¶r rekommendationer
- ğŸ¤– MaskininlÃ¤rningsbaserad anomalidetektering
- ğŸ“… Rapporthistorik och jÃ¤mfÃ¶relser mellan perioder
- ğŸ”” Notifikationer vid stora avvikelser

## Teknisk information

### API-anrop

Rapporten anvÃ¤nder fÃ¶ljande service-metod:

```csharp
Task<SpendingPatternReport> GetSpendingPatternReportAsync(
    DateTime fromDate, 
    DateTime toDate, 
    int? householdId = null
)
```

### Datamodeller

- `SpendingPatternReport`: Huvudrapporten
- `CategorySpending`: Utgiftsdata per kategori
- `SpendingTrend`: Trenddata
- `SpendingAnomaly`: Avvikelsedata
- `SpendingRecommendation`: Rekommendationer
- `MonthlySpendingData`: MÃ¥natlig sammanfattning

### Prestanda

- Rapporten cachas inte - genereras vid varje anrop
- Rekommenderad maxperiod: 2 Ã¥r (fÃ¶r prestanda)
- Typisk svarstid: <1 sekund fÃ¶r 12 mÃ¥naders data

## Support

FÃ¶r frÃ¥gor eller problem med UtgiftsmÃ¶nster-analysen, kontakta supporten eller Ã¶ppna ett issue pÃ¥ GitHub.
