# Budget-funktionalitet - Anv√§ndarguide

## √ñversikt

Budget-funktionaliteten i Privatekonomi hj√§lper dig att planera och f√∂lja upp din ekonomi genom att s√§tta upp budgetar f√∂r olika kategorier och sedan j√§mf√∂ra faktiskt utfall mot planerade belopp.

Denna guide baseras p√• b√§sta praxis fr√•n L√§nsf√∂rs√§kringar och Konsumentverket f√∂r att hj√§lpa dig skapa en lyckad hush√•llsbudget.

![Budgethantering](https://github.com/user-attachments/assets/dbd0d556-e37a-43df-99fb-a99f09ffdd40)
*√ñversikt √∂ver budgetar med aktiva och avslutade budgetar*

## Hur g√∂r man en lyckad hush√•llsbudget?

Att ta kontroll √∂ver din privatekonomi beh√∂ver inte vara s√• jobbigt som du kanske tror. H√§r √§r de viktigaste stegen:

### 1. Ta med dina fasta m√•nadskostnader

- G√∂r en klassisk uppst√§llning med alla fasta m√•nadskostnader som exempelvis din elr√§kning, hemf√∂rs√§kring och dina streamingtj√§nster.
- **Viktigt:** Se sparandet som en m√•nadskostnad, och ha med det i budgeten. Sparandet ska alltid dras i b√∂rjan av m√•naden s√• att det inte bortprioriteras.

### 2. Dela upp r√∂rliga m√•nadskostnader som matink√∂p

- N√§r det g√§ller r√∂rliga kostnader som matink√∂p √§r det b√§st att dela upp matkostnaderna i tv√• olika delar: en f√∂r maten du handlar i butik och en f√∂r maten du handlar p√• restaurang. Kanske inser du att det har blivit lite v√§l m√•nga uteluncher?
- M√•nga fasta kostnader √§r saker som du m√•ste ha, s√• det √§r oftast de r√∂rliga kostnaderna som du f√•r laborera med om budgeten inte g√•r ihop.

### 3. G√∂r varje m√•nad kostnadsneutral

- F√• en b√§ttre √∂verblick genom att g√∂ra varje m√•nad kostnadsneutral, allts√• att du delar upp √•rskostnader m√•nadsvis.
- Ett exempel √§r en fritidsaktivitet till barnen som kostar 2 400 kronor per √•r. D√• delar du den kostnaden med tolv, s√• att du l√§gger undan 200 kronor i m√•naden f√∂r att vara s√§ker p√• att du kan betala fakturan.
- Det kan ocks√• handla om ett √•rskort p√• gymmet, eller vilken annan √•rskostnad som helst.
- I Privatekonomi anv√§nder du **periodv√§ljaren** f√∂r varje kategori f√∂r att automatiskt dela upp √•rskostnader.

## Funktioner

### Skapa Budget

1. Navigera till **Budget** i menyn
2. Klicka p√• **Ny Budget**
3. Fyll i f√∂ljande information:
   - **Budgetnamn**: Ett beskrivande namn f√∂r din budget (t.ex. "Oktober 2025")
   - **Period**: V√§lj mellan M√•nadsbudget eller √Örsbudget
   - **Startdatum**: N√§r budgeten b√∂rjar g√§lla (format: √Ö√Ö√Ö√Ö-MM-DD)
   - **Slutdatum**: N√§r budgeten slutar g√§lla (format: √Ö√Ö√Ö√Ö-MM-DD)
   - **Beskrivning**: Valfri beskrivning av budgeten

4. **V√§lj budgetmall** (Rekommenderat!):
   - **Svenska Familjehush√•ll**: Baserad p√• L√§nsf√∂rs√§kringar's mall f√∂r familjer med barn. Inkluderar 15% sparande, separata kostnader f√∂r mat i butik vs restaurang, och rimliga f√∂rdelningar f√∂r en svensk familj.
   - **Svenska Singelhush√•ll**: F√∂r ensamst√•ende med h√∂gre sparkvot (20%) och l√§gre fasta kostnader.
   - **50/30/20-regeln**: Klassisk budgetmodell med 50% behov, 30% √∂nskem√•l, 20% sparande.
   - **Zero-based budgeting**: Varje krona tilldelas ett syfte.
   - **Kuvertbudget**: Strikta gr√§nser per kategori.
   - **Anpassad**: Tom mall d√§r du sj√§lv fyller i alla belopp.

5. Ange din totala m√•nadsinkomst och klicka **Anv√§nd mall** f√∂r att automatiskt f√∂rdela budgeten.

6. Justera budgetposterna efter behov:
   - F√∂r varje kategori, v√§lj **period** (m√•nad, kvartal, halv√•r, eller hel√•r)
   - Ange belopp f√∂r den valda perioden
   - Systemet ber√§knar automatiskt m√•nadskostnaden

7. Klicka p√• **Skapa** f√∂r att spara budgeten

### Visa Budgetar

P√• Budget-sidan visas alla dina budgetar med:
- **Budgetnamn** och period
- **Status**: 
  - **Aktiv** - Budgeten √§r aktiv just nu (dagens datum ligger mellan start- och slutdatum)
  - **Kommande** - Budgeten startar i framtiden
  - **Avslutad** - Budgeten har passerat sitt slutdatum

### Budgetdetaljer

Klicka p√• en budget f√∂r att expandera och se detaljerad information:

#### Sammanfattning
- **Total Planerad**: Summan av alla planerade budgetposter
- **Faktiskt Utfall**: Summan av faktiska utgifter under budgetperioden
- **Kvar att Spendera**: Skillnaden mellan planerat och faktiskt (positivt v√§rde = du har pengar kvar)

#### Budgetposter per kategori

En tabell som visar varje kategori med:
- **Kategori**: Kategorinamn med f√§rgkodning
- **Planerat**: Det belopp du planerat f√∂r kategorin
- **Faktiskt**: Faktiskt utfall baserat p√• dina transaktioner
- **Differens**: Skillnad mellan planerat och faktiskt
  - üü¢ Gr√∂nt = Under budget
  - üî¥ R√∂tt = √ñver budget
- **Progress**: Visuell progress bar som visar hur stor del av budgeten som anv√§nts
  - 0-75% = Gr√∂n (bra)
  - 75-100% = Orange (varning)
  - >100% = R√∂d (√∂ver budget)

### Ta bort Budget

1. Klicka p√• papperskorgen-ikonen bredvid budgetens namn
2. Bekr√§fta att du vill ta bort budgeten

## Integration med Transaktioner

Budget-funktionaliteten integreras automatiskt med dina befintliga transaktioner:
- Transaktioner som faller inom budgetens datumintervall r√§knas in i det faktiska utfallet
- Endast utgifter (negativa transaktioner) r√§knas mot budgeten
- Transaktioner med split-kategorisering f√∂rdelas korrekt p√• respektive budgetpost

## Tips och B√§sta Praxis

### Grundl√§ggande budgettips

1. **Realistiska budgetar**: B√∂rja med att titta p√• dina historiska utgifter f√∂r att s√§tta realistiska budgetar
2. **M√•nadsbudgetar**: Anv√§nd m√•nadsbudgetar f√∂r b√§ttre kontroll och uppf√∂ljning
3. **Regelbunden uppf√∂ljning**: F√∂lj upp din budget minst en g√•ng i veckan
4. **Justera efter behov**: Var inte r√§dd f√∂r att justera budgeten baserat p√• faktiskt utfall
5. **S√§kerhetsmarginal**: L√§gg till 5-10% s√§kerhetsmarginal p√• varje kategori

### Svenska hush√•llsbudget-tips (fr√•n L√§nsf√∂rs√§kringar)

1. **Sparande f√∂rst**: Se sparandet som en fast m√•nadskostnad som betalas f√∂rst varje m√•nad, inte som n√•got du sparar "om det blir pengar √∂ver". L√§gg undan minst 10-15% av inkomsten f√∂r familjer, 15-20% f√∂r singelhush√•ll.

2. **Dela upp matkostnader**: 
   - Ha en budgetpost f√∂r mat i butik (ca 12-15% av inkomsten f√∂r familjer)
   - Ha en separat post f√∂r restaurang/utemat (ca 5-6% av inkomsten)
   - Detta hj√§lper dig se hur mycket som g√•r till "lyxkonsumtion" vs basutgifter

3. **√Örskostnader m√•nadsvis**:
   - Barnens fritidsaktiviteter (2 400 kr/√•r = 200 kr/m√•nad)
   - √Örskort p√• gym (5 000 kr/√•r ‚âà 417 kr/m√•nad)
   - F√∂rs√§kringar som betalas √•rligen
   - Anv√§nd periodv√§ljaren i budgeten f√∂r att automatiskt dela upp dessa

4. **Fasta vs r√∂rliga kostnader**:
   - **Fasta**: Hyra/boende (30%), f√∂rs√§kringar (2-3%), el (1.5-2%), sparande (15-20%)
   - **R√∂rliga**: Mat (12-15%), transport (7-8%), n√∂je (4-5%), shopping (4-6%)
   - De r√∂rliga kostnaderna √§r det du kan justera om budgeten inte g√•r ihop

5. **Buffert f√∂r of√∂rutsett**: L√§gg alltid in en buffert p√• 5-10% f√∂r ov√§ntade utgifter

### J√§mf√∂r med Konsumentverket

Anv√§nd [Konsumentverkets budgetkalkyl](https://budgetkalkylen.konsumentverket.se/budgetkalkylen-berakna/?bkName=Min+budgetkalkyl#content) f√∂r att se vad som √§r rimliga kostnader f√∂r din hush√•llstyp och var du bor i Sverige. Privatekonomi's svenska budgetmallar baseras p√• liknande f√∂rdelningar.

## Teknisk Information

### API Endpoints

Budget-funktionaliteten exponerar f√∂ljande REST API endpoints:

- `GET /api/budgets` - H√§mta alla budgetar
- `GET /api/budgets/{id}` - H√§mta en specifik budget
- `GET /api/budgets/active` - H√§mta aktiva budgetar
- `GET /api/budgets/{id}/actual-amounts` - H√§mta faktiska belopp per kategori f√∂r en budget
- `POST /api/budgets` - Skapa ny budget
- `PUT /api/budgets/{id}` - Uppdatera budget
- `DELETE /api/budgets/{id}` - Ta bort budget

### Datamodell

#### Budget
```csharp
public class Budget
{
    public int BudgetId { get; set; }
    public string Name { get; set; }
    public string? Description { get; set; }
    public DateTime StartDate { get; set; }
    public DateTime EndDate { get; set; }
    public BudgetPeriod Period { get; set; }
    public ICollection<BudgetCategory> BudgetCategories { get; set; }
}
```

#### BudgetCategory
```csharp
public class BudgetCategory
{
    public int BudgetCategoryId { get; set; }
    public int BudgetId { get; set; }
    public int CategoryId { get; set; }
    public decimal PlannedAmount { get; set; }
    public int RecurrencePeriodMonths { get; set; } = 1;  // Nytt! F√∂r √•rskostnader
    public decimal MonthlyAmount => RecurrencePeriodMonths > 0 ? PlannedAmount / RecurrencePeriodMonths : PlannedAmount;
    public Budget Budget { get; set; }
    public Category Category { get; set; }
}
```

#### BudgetPeriod
```csharp
public enum BudgetPeriod
{
    Monthly,  // M√•nadsbudget
    Yearly    // √Örsbudget
}
```

#### BudgetTemplateType
```csharp
public enum BudgetTemplateType
{
    Custom = 0,              // Anpassad budget
    ZeroBased = 1,          // Zero-based budgeting
    FiftyThirtyTwenty = 2,  // 50/30/20-regeln
    Envelope = 3,           // Kuvertbudget
    SwedishFamily = 4,      // Svenska familjehush√•ll (L√§nsf√∂rs√§kringar-stil) - NYA!
    SwedishSingle = 5       // Svenska singelhush√•ll (L√§nsf√∂rs√§kringar-stil) - NYA!
}
```

## Budgetmallar i detalj

### Svenska Familjehush√•ll (Rekommenderad f√∂r familjer)

Denna mall baseras p√• L√§nsf√∂rs√§kringar's riktlinjer f√∂r svenska familjer:

- **Boende**: 30% (hyra/l√•n, el, f√∂rs√§kringar)
- **Sparande**: 15% (behandlas som fast m√•nadskostnad, prioriteras!)
- **Mat (butik)**: 15% (dagligvaruhandel)
- **Mat (restaurang)**: 5% (utemat, lunch p√• jobbet)
- **Transport**: 8% (bil, kollektivtrafik, bensin)
- **Barn/Fritidsaktiviteter**: 5% (hobbys, sport, aktiviteter)
- **N√∂je/Streaming**: 4% (underh√•llning, prenumerationer)
- **Shopping/Kl√§der**: 4% (kl√§der, skor, presenter)
- **H√§lsa/Gym**: 3% (tr√§ning, friskv√•rd)
- **Buffert/√ñvrigt**: 6% (of√∂rutsedda utgifter)

**Total**: 100% av m√•nadsinkomsten

**S√§rskilda funktioner**:
- Sparande prioriteras som en fast m√•nadskostnad
- Separation av mat i butik vs restaurang
- Inkluderar budgetposter f√∂r barn och fritidsaktiviteter

### Svenska Singelhush√•ll (Rekommenderad f√∂r ensamst√•ende)

Denna mall √§r anpassad f√∂r ensamst√•ende med l√§gre fasta kostnader och h√∂gre sparkvot:

- **Boende**: 28% (l√§gre f√∂r en person)
- **Sparande**: 20% (h√∂gre sparkvot m√∂jlig f√∂r singlar)
- **Mat (butik)**: 12% (l√§gre f√∂r en person)
- **Mat (restaurang)**: 6% (n√•got h√∂gre andel socialt)
- **Transport**: 7%
- **N√∂je/Streaming**: 5%
- **Shopping/Kl√§der**: 6%
- **H√§lsa/Gym**: 4%
- **Buffert/√ñvrigt**: 9.5%

**Total**: 100% av m√•nadsinkomsten

**S√§rskilda funktioner**:
- H√∂gre sparkvot (20%) f√∂r att bygga ekonomisk trygghet snabbare
- Justerade kategorier f√∂r en persons behov
- Mer utrymme f√∂r personlig utveckling och sociala aktiviteter

#### BudgetPeriod
```csharp
public enum BudgetPeriod
{
    Monthly,  // M√•nadsbudget
    Yearly    // √Örsbudget
}
```

## Framtida F√∂rb√§ttringar

Planerade f√∂rb√§ttringar f√∂r budget-funktionaliteten:
- [ ] Kopiera budget fr√•n f√∂reg√•ende period
- [ ] Budgetmallar f√∂r vanliga scenarion
- [ ] Notifieringar n√§r budget n√§rmar sig gr√§nsen
- [ ] Diagram och grafer f√∂r budgetvisualisering
- [ ] Export av budgetrapporter till Excel/PDF
- [ ] Budgetj√§mf√∂relse mellan perioder
- [ ] Automatiska budgetf√∂rslag baserat p√• historik
